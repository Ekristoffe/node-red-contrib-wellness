<script type="text/javascript">
    RED.nodes.registerType('Flu-Index',{
        category: 'wellness',
        color: '#F3B567',
        defaults: {
            name: {value:""},
        },
        inputs:1,
        outputs:1,
        icon: "function.svg",
        label: function() {
            return this.name||"Flu Risk Index";
        }
    });
</script>

<script type="text/x-red" data-template-name="Flu-Index">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="Flu-Index">
    <p>Flu risk level is determined by air temperature and humidity.</p>

    <h3>Inputs</h3>
    Enable input processing to allow input payload signals
    <dl class="message-properties">
        <dt>topic <span class="property-type">string</span></dt>
        <dd>if the topic name is temperature or temp the payload will contain the temperature data (parsed from a string to a float)</dd>
        <dd>if the topic name is humidity or hum the payload will contain the humidity data (parsed from a string to a float)</dd>
        <dd>if the topic name is something else the payload.temperature will contain the temperature data and the payload.humidity will contain the humidity data  (parsed from a string to a float)</dd>
        
        <dt>payload <span class="property-type">string | float</span></dt>
        <dd>the payload of the message to publish</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>topic <span class="property-type">string</span></dt>
        <dd>HeatstrokeIndex</dd>
        <dt>payload <span class="property-type">string | float</span></dt>
        <dd>
            <p>
                Users can estimate the risk of flu contagion:<br>
                <table style="border-collapse: collapse; border: 2px solid rgb(200, 200, 200); letter-spacing: 1px; font-family: sans-serif; font-size: .6rem; ">
                    <thead style="background-color: #3f87a6; color: #fff;">
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Flu Index</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Risk of flu contagion</td>
                        </tr>
                    </thead>
                    <tbody style="background-color: #e4f0f5;">
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">18 - ...</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Very safe</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">12 - 17</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Safe</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">7 - 11</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Caution</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">... - 6</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Warning</td>
                        </tr>
                    </tbody>
                </table>
            </p>
        </dd>
        <dt>alert <span class="property-type">string | number</span></dt>
        <dd>
            <p>
                <table style="border-collapse: collapse; border: 2px solid rgb(200, 200, 200); letter-spacing: 1px; font-family: sans-serif; font-size: .6rem; ">
                    <thead style="background-color: #3f87a6; color: #fff;">
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Alert level</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Information</td>
                        </tr>
                    </thead>
                    <tbody style="background-color: #e4f0f5;">
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">3</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Warning</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">2</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Caution</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">1</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Safe</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">0</td>
                            <td style="border: 1px solid rgb(190, 190, 190); padding: 5px 10px;">Very safe</td>
                        </tr>
                    </tbody>
                </table>
            </p>
        </dd>
    </dl>
</script>   
